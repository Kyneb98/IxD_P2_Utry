<div class="page-container">
  <app-zalando-top-bar></app-zalando-top-bar>

  <!-- Main Content Area - shows as zalandos homepage-->
  <main class="main-content">
    <!-- Left Column: Images -->
    <!-- === Original Image Gallery Section === -->
  @if (!showUtryView) {
    <section class="image-gallery"> <!-- Hide if showUtryView is true -->
    <div class="thumbnails">
      <img *ngFor="let thumb of thumbnails" [src]="thumb" alt="T-shirt thumbnail" class="thumbnail-img">
    </div>
    <div class="main-image-container">
      <img [src]="mainImageUrl" alt="Product Image" class="main-product-image">
    </div>
  </section>
}
  <!-- === End Original Zalando Image Gallery Section === -->


  <!-- === New UTRY Container - replaces the image gallery with UTRY view === -->
  @if(showUtryView){ <!-- Show if showUtryView is true -->
    <section class="utry-container"> 

    <div class="utry-header">
      <img src="logo.svg" alt="UTRY Logo" class="utry-logo">
      <div class="utry-header-icons">
         <button mat-icon-button class="utry-icon-button">
            <mat-icon>settings</mat-icon>
         </button>
          <button mat-icon-button class="utry-icon-button" (click)="deactivateUtryView()"> <!--Close action-->
            <mat-icon>close</mat-icon>
         </button>
      </div>
    </div>
  


     <!-- === UTRY Content Area === -->
  <div class="utry-content-area" [ngSwitch]="activeUtrySectionId"> <!--Moved from nav bar--> 

    <!-- Specific Content Sections -->
    <div *ngSwitchCase="'size-fit'">
      <model-viewer
      src="/models/William.glb" alt="3D model of clothing"
      camera-controls
      touch-action="pan-y"            
      

      camera-orbit="140deg 80deg auto"
      shadow-intensity="1"
      class="utry-model-viewer">
       <div class="progress-bar hide" slot="progress-bar">
            <div class="update-bar"></div>
        </div>
  </model-viewer>
        <app-size-and-fit-expansion-panel></app-size-and-fit-expansion-panel>
    </div>

    <div *ngSwitchCase="'compare'" class="compare-section">
      <model-viewer
      src="/models/William.glb" alt="3D model of clothing"
      camera-controls
      touch-action="pan-y"            
      camera-target="0m 1.4m 0m"
      field-of-view="100deg"
      min-camera-orbit="auto auto 1m"
      max-camera-orbit="auto auto 2m"

      camera-orbit="140deg 80deg auto"
      shadow-intensity="1"
      class="utry-model-viewer">
       <div class="progress-bar hide" slot="progress-bar">
            <div class="update-bar"></div>
        </div>
  </model-viewer>

  <model-viewer
      src="/models/William.glb" alt="3D model of clothing"
      camera-controls
      touch-action="pan-y"            
      camera-target="0m 1.4m 0m"
      field-of-view="100deg"
      min-camera-orbit="auto auto 1m"
      max-camera-orbit="auto auto 2m"

      camera-orbit="140deg 80deg auto"
      shadow-intensity="1"
      class="utry-model-viewer">
       <div class="progress-bar hide" slot="progress-bar">
            <div class="update-bar"></div>
        </div>
  </model-viewer>

  
  
        <app-compare-expansion-panel></app-compare-expansion-panel>
    </div>

    <div *ngSwitchCase="'materials'">
      <model-viewer
      src="/models/William.glb" alt="3D model of clothing"
      camera-controls
      touch-action="pan-y"            

      camera-orbit="140deg 80deg auto"
      shadow-intensity="1"
      class="utry-model-viewer">
       <div class="progress-bar hide" slot="progress-bar">
            <div class="update-bar"></div>
        </div>
  </model-viewer>
       <app-material-expansion-panel></app-material-expansion-panel>
    </div>

    <div *ngSwitchCase="'style'">
      <model-viewer
      src="/models/William.glb" alt="3D model of clothing"
      camera-controls
      touch-action="pan-y"            
      
      camera-orbit="140deg 80deg auto"
      shadow-intensity="1"
      class="utry-model-viewer">
       <div class="progress-bar hide" slot="progress-bar">
            <div class="update-bar"></div>
        </div>
  </model-viewer>
       <app-style-expansion-panel></app-style-expansion-panel>
    </div>
</div>
<!-- === End UTRY Content Area === -->




    <!-- Bottom Navigation Bar -->
    <div class="utry-footer">
      <!-- Pass initial active ID and listen for selection changes -->
      <app-bottom-nav
          [activeSectionId]="activeUtrySectionId"
          (sectionSelected)="onUtrySectionSelected($event)">
      </app-bottom-nav>
   </div>

  </section> 
}
  <!-- === End New UTRY Container === -->










    <!-- Right Column: Product Details -->
    <aside class="product-details">
      <h1>WE Fashion</h1> <!-- Updated Brand -->
      <h2>T-shirts basic - white</h2>
      <p class="price">149,00 DKK <span class="vat-info">incl. moms</span></p>

      <!-- shows the different color pictures -->
      <div class="color-selector">
        <p class="color-label">Color: <strong>Black</strong></p>
        <div class="swatches">
          <button *ngFor="let swatch of colorSwatches" class="swatch" [class.selected]="swatch.selected">
            <img [src]="swatch.img" [alt]="swatch.name">
          </button>
        </div>
      </div>

      <!-- Shows the 'select size' -->
      <mat-form-field appearance="outline" class="size-selector">
        <mat-label>Select size</mat-label>
        <mat-select>
          <mat-option value="s">S</mat-option>
          <mat-option value="m">M</mat-option>
          <mat-option value="l">L</mat-option>
          <mat-option value="xl">XL</mat-option>
        </mat-select>
      </mat-form-field>

      <div class="action-buttons">
        <button mat-flat-button color="primary" class="add-to-cart">Add to cart</button>
        <button mat-stroked-button class="wishlist-button">
          <mat-icon>favorite_border</mat-icon>
        </button>
      </div>


    
      <div class="utry-window-button" (click)="activateUtryView()">
        <img src="logoWhite.svg" alt="UTRY Logo">
        <span class="utry-window-text">Let's get you into the fitting room</span>
     </div>



      <!-- Seller/Delivery/Returns Section -->
      <div class="info-box">
         <div class="info-line seller-info">
            <span>Sold by <a href="#">WE Fashion</a>, sent by Zalando.</span>
         </div>
         <div class="info-line delivery-info">
            <mat-icon>local_shipping</mat-icon>
            <div class="delivery-text">
               <strong>wed 9 apr - thur 10 apr</strong> <!-- Static Date -->
               <span>Standard delivery</span>
               <a href="#" class="free-shipping">Free with purchases from 299 DKK*</a>
            </div>
            <span class="delivery-cost">49,00 DKK.</span>
         </div>
          <div class="info-line return-info">
            <mat-icon>replay</mat-icon> <!-- Return icon -->
            <span>30 days free return right</span>
         </div>
         <div class="info-line sellback-info">
            <mat-icon>sell</mat-icon> <!-- Sell icon -->
            <span>Sell back</span>
            <mat-icon class="info-icon" matTooltip="Information about selling back">info_outline</mat-icon>
         </div>
      </div>




      <!-- Expansion Panels for Details -->
      <mat-accordion multi="true">
        <mat-expansion-panel class="details-panel">
          <mat-expansion-panel-header>
            <mat-panel-title> Material and washing guides </mat-panel-title>
          </mat-expansion-panel-header>
          <p>Placeholder for material and washing instructions.</p>
          <p>E.g., 100% Cotton, Machine wash at 30Â°C.</p>
        </mat-expansion-panel>

        <mat-expansion-panel class="details-panel">
          <mat-expansion-panel-header>
            <mat-panel-title> Product information</mat-panel-title>
          </mat-expansion-panel-header>
          <p>Placeholder for product information.</p>
          <p>E.g., Neckline: Crew neck, Pattern: Plain.</p>
        </mat-expansion-panel>

         <mat-expansion-panel class="details-panel">
          <mat-expansion-panel-header>
            <mat-panel-title> Fit </mat-panel-title> <!-- Fit -->
          </mat-expansion-panel-header>
          <p>Placeholder for fit information.</p>
          <p>E.g., Fit: Regular fit, Length: Normal length, Sleeve length: Short sleeve.</p>
        </mat-expansion-panel>
      </mat-accordion>



      <!-- Brand Follow -->
      <div class="brand-follow">
         <span>WE Fashion</span>
         <button mat-stroked-button class="follow-button">
            <mat-icon>add</mat-icon> Follow
         </button>
      </div>




      <!-- Report Link -->
       <a href="#" class="report-link">
         <mat-icon>flag_outline</mat-icon> Report a legal matter
       </a>

    </aside>
  </main>

</div>